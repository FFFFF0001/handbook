<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>handbook</title>
    <link rel="stylesheet" type="text/css" href="../../../../static/css/main.css">
</head>
<body>
<div class="nav">
    <div class="logo">
        
            <img src="../../../../idoc-logo.svg">
        
    </div>
<ul><li><a href="../../../../index.html">Git常用命令</a></li><li><a href="#"><span></span>前端</a><ul><li><a href="#"><span></span>Javascript</a><ul><li><a href="#"><span></span>RN</a><ul><li><a href="../../../../html/前端/Javascript/RN/React-native Android环境搭建.html">React-native Android环境搭建</a></li></ul></li><li><a href="../../../../html/前端/Javascript/思维导图.html">思维导图</a></li><li><a href="../../../../html/前端/Javascript/正则表达式.html">正则表达式</a></li><li><a href="../../../../html/前端/Javascript/轻量高效的开源JavaScript插件和库.html">轻量高效的开源JavaScript插件和库</a></li></ul></li></ul></li><li><a href="#"><span></span>服务端编程</a><ul><li><a href="#"><span></span>数据库</a><ul><li><a href="../../../../html/服务端编程/数据库/Redis.html">Redis</a></li></ul></li><li><a href="#"><span></span>系统服务</a><ul><li><a href="../../../../html/服务端编程/系统服务/docker.html">docker</a></li><li><a href="#"><span></span>shell</a><ul><li><a href="../../../../html/服务端编程/系统服务/shell/shell-regex.html">shell-regex</a></li><li><a href="../../../../html/服务端编程/系统服务/shell/Shell.html">Shell</a></li></ul></li><li><a href="../../../../html/服务端编程/系统服务/Nginx.html">Nginx</a></li></ul></li><li><a href="#"><span></span>Linux</a><ul></ul></li><li><a href="#"><span></span>数据库</a><ul><li><a href="#"><span></span>mysql</a><ul><li><a href="../../../../html/服务端编程/数据库/mysql/21-minutes-MySQL-basic-entry.html">21-minutes-MySQL-basic-entry</a></li><li><a href="../../../../html/服务端编程/数据库/mysql/awesome-mysql.html">awesome-mysql</a></li><li><a href="#"><span></span>chapter1</a><ul><li><a href="../../../../html/服务端编程/数据库/mysql/chapter1/1.1.html">1.1</a></li><li><a href="../../../../html/服务端编程/数据库/mysql/chapter1/1.2.html">1.2</a></li><li><a href="../../../../html/服务端编程/数据库/mysql/chapter1/1.3.html">1.3</a></li><li><a href="../../../../html/服务端编程/数据库/mysql/chapter1/1.4.html">1.4</a></li><li><a href="../../../../html/服务端编程/数据库/mysql/chapter1/1.html">1</a></li></ul></li><li><a href="#"><span></span>chapter17</a><ul><li><a href="../../../../html/服务端编程/数据库/mysql/chapter17/17.1.html">17.1</a></li><li><a href="../../../../html/服务端编程/数据库/mysql/chapter17/17.2.html">17.2</a></li><li><a href="../../../../html/服务端编程/数据库/mysql/chapter17/17.3.html">17.3</a></li></ul></li><li><a href="#"><span></span>chapter2</a><ul><li><a href="../../../../html/服务端编程/数据库/mysql/chapter2/2.1.html">2.1</a></li><li><a href="../../../../html/服务端编程/数据库/mysql/chapter2/2.2.html">2.2</a></li><li><a href="../../../../html/服务端编程/数据库/mysql/chapter2/2.3.html">2.3</a></li><li><a href="../../../../html/服务端编程/数据库/mysql/chapter2/2.4.html">2.4</a></li><li><a href="../../../../html/服务端编程/数据库/mysql/chapter2/2.5.html">2.5</a></li></ul></li><li><a href="#"><span></span>chapter3</a><ul><li><a href="../../../../html/服务端编程/数据库/mysql/chapter3/3.1.html">3.1</a></li><li><a href="../../../../html/服务端编程/数据库/mysql/chapter3/3.2.html">3.2</a></li><li><a href="../../../../html/服务端编程/数据库/mysql/chapter3/3.3.html">3.3</a></li><li><a href="../../../../html/服务端编程/数据库/mysql/chapter3/3.4.html">3.4</a></li><li><a href="../../../../html/服务端编程/数据库/mysql/chapter3/3.5.html">3.5</a></li><li><a href="../../../../html/服务端编程/数据库/mysql/chapter3/3.html">3</a></li></ul></li><li><a href="../../../../html/服务端编程/数据库/mysql/README.html">README</a></li></ul></li><li><a href="../../../../html/服务端编程/数据库/Redis.html">Redis</a></li></ul></li></ul></li><li><a href="#"><span></span>工具快捷键</a><ul><li><a href="../../../../html/工具快捷键/Git常用命令.html">Git常用命令</a></li><li><a href="../../../../html/工具快捷键/vim.html">vim</a></li></ul></li><li><a href="#"><span></span>其他</a><ul><li><a href="../../../../html/其他/HTTP状态码.html">HTTP状态码</a></li><li><a href="../../../../html/其他/通过代理工具提高Github Clone速度.html">通过代理工具提高Github Clone速度</a></li></ul></li></ul></div>


<div class="forkgithub"><a target="_blank" href="https://github.com/poetries/handbook"></a></div>

<div class="warpper">

    <div class="page-toc">
        <ul><li><a href="#t0Rocket.Chat 开源IM系统部署">Rocket.Chat 开源IM系统部署</a><ul><li><a href="#t1安装依赖步骤">安装依赖步骤</a></li><li><a href="#t2安装Mongodb数据库">安装Mongodb数据库</a></li><li><a href="#t3安装Rocket.Chat">安装Rocket.Chat</a></li><li><a href="#t4启动服务">启动服务</a></li><li><a href="#t5开机启动">开机启动</a></li></ul></li></ul>
    </div>
    
    <div class="content markdown-body">
        <h1 id="t0Rocket.Chat &#x5F00;&#x6E90;IM&#x7CFB;&#x7EDF;&#x90E8;&#x7F72;">Rocket.Chat &#x5F00;&#x6E90;IM&#x7CFB;&#x7EDF;&#x90E8;&#x7F72; <a href="#t0Rocket.Chat &#x5F00;&#x6E90;IM&#x7CFB;&#x7EDF;&#x90E8;&#x7F72;"> # </a></h1>
<p>Rocket.Chat &#x662F;&#x7279;&#x6027;&#x6700;&#x4E30;&#x5BCC;&#x7684; Slack &#x5F00;&#x6E90;&#x66FF;&#x4EE3;&#x54C1;&#x4E4B;&#x4E00;&#x3002;</p>
<p>&#x4E3B;&#x8981;&#x529F;&#x80FD;&#xFF1A;&#x7FA4;&#x7EC4;&#x804A;&#x5929;&#xFF0C;&#x76F4;&#x63A5;&#x901A;&#x4FE1;&#xFF0C;&#x79C1;&#x804A;&#x7FA4;&#xFF0C;&#x684C;&#x9762;&#x901A;&#x77E5;&#xFF0C;&#x5A92;&#x4F53;&#x5D4C;&#x5165;&#xFF0C;&#x94FE;&#x63A5;&#x9884;&#x89C8;&#xFF0C;&#x6587;&#x4EF6;&#x4E0A;&#x4F20;&#xFF0C;&#x8BED;&#x97F3;/&#x89C6;&#x9891; &#x804A;&#x5929;&#xFF0C;&#x622A;&#x56FE;&#x7B49;&#x7B49;&#x3002;Rocket.Chat &#x539F;&#x751F;&#x652F;&#x6301; Windows&#xFF0C;Mac OS X &#xFF0C;Linux&#xFF0C;iOS &#x548C; Android &#x5E73;&#x53F0;&#x3002;Rocket.Chat &#x901A;&#x8FC7; hubot &#x96C6;&#x6210;&#x4E86;&#x975E;&#x5E38;&#x6D41;&#x884C;&#x7684;&#x670D;&#x52A1;&#xFF0C;&#x6BD4;&#x5982; GitHub&#xFF0C;GitLab&#xFF0C;Confluence&#xFF0C;JIRA &#x7B49;&#x7B49;&#x3002;</p>
<p>&#x9AD8;&#x7EA7;&#x7684;&#x7279;&#x6027;&#x5305;&#x62EC;&#xFF1A;OTR &#x6D88;&#x606F;&#xFF0C;XMPP &#x591A;&#x7528;&#x6237;&#x804A;&#x5929;&#xFF0C;Kerberos &#x8BA4;&#x8BC1;&#xFF0C;p2p &#x6587;&#x4EF6;&#x5206;&#x4EAB;&#x7B49;&#x7B49;&#x3002;</p>
<p>&#x4EE5;&#x4E0B;&#x6559;&#x7A0B;&#x662F;&#x5728; <code>CentOS Linux release 7.2.1511 (Core)</code> &#x4E0B;&#x5B89;&#x88C5; <code>Rocket.Chat</code>&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5B98;&#x65B9;&#x6559;&#x7A0B;&#x5B89;&#x88C5;&#x5728;&#x8FD9;&#x91CC;&#xFF1A;<a href="https://rocket.chat/docs/installation/manual-installation/centos/">Deploying Rocket.Chat on Centos 7</a>&#x3002;</p>
<p>&#x4E3B;&#x8981;&#x4F9D;&#x8D56;&#x4E09;&#x4E2A;&#x5DE5;&#x5177; <code>Nginx</code>&#x3001;<code>CentOS 7</code>&#x3001;<code>Mongodb</code></p>
<p><img src="../../../../img/screenshot.png" alt=""></p>
<h2 id="t1&#x5B89;&#x88C5;&#x4F9D;&#x8D56;&#x6B65;&#x9AA4;">&#x5B89;&#x88C5;&#x4F9D;&#x8D56;&#x6B65;&#x9AA4; <a href="#t1&#x5B89;&#x88C5;&#x4F9D;&#x8D56;&#x6B65;&#x9AA4;"> # </a></h2>
<p>&#x6DFB;&#x52A0;epel&#x5B58;&#x50A8;&#x5E93;&#x5E76;&#x66F4;&#x65B0;&#x6240;&#x6709;&#x5185;&#x5BB9;&#x3002;</p>
<pre><code class="lang-bash">yum -y install epel-release &amp;&amp; yum -y update
</code></pre>
<p>&#x4E00;&#x822C;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x65B0;&#x7CFB;&#x7EDF;&#x81EA;&#x5E26;<code>curl</code>&#x5DE5;&#x5177;&#xFF0C;&#x6CA1;&#x6709;&#x7684;&#x8BDD;&#x4F60;&#x9700;&#x8981;&#x5B89;&#x88C5;&#xFF0C;&#x540E;&#x9762;&#x4F1A;&#x7528;&#x5230;&#xFF0C;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre><code class="lang-bash">yum install -y curl
</code></pre>
<p>&#x5B89;&#x88C5; <code>node.js</code> &#x548C; <code>npm</code></p>
<pre><code class="lang-bash">yum install -y nodejs npm
<span class="hljs-comment"># node&#x7248;&#x672C;&#x5F88;&#x91CD;&#x8981;&#x9700;&#x8981;&#x5B89;&#x88C5;`n`&#x6765;&#x5207;&#x6362;&#x7248;&#x672C;</span>
npm install -g inherits n
<span class="hljs-comment"># &#x5207;&#x6362;node&#x7248;&#x672C;, &#x5F88;&#x91CD;&#x8981;</span>
n 4.8.4
</code></pre>
<p>&#x5B89;&#x88C5;meteor</p>
<pre><code class="lang-bash">curl https://install.meteor.com | sh
</code></pre>
<h2 id="t2&#x5B89;&#x88C5;Mongodb&#x6570;&#x636E;&#x5E93;">&#x5B89;&#x88C5;Mongodb&#x6570;&#x636E;&#x5E93; <a href="#t2&#x5B89;&#x88C5;Mongodb&#x6570;&#x636E;&#x5E93;"> # </a></h2>
<p>&#x5B89;&#x88C5;&#x4F7F;&#x7528;<code>Mongodb</code>&#xFF0C;&#x5148;&#x6DFB;&#x52A0; <code>yum repo</code></p>
<pre><code class="lang-bash">vi /etc/yum.repos.d/mongodb.repo
</code></pre>
<p>&#x590D;&#x5236;&#x4E0B;&#x9762;&#x5185;&#x5BB9;&#xFF0C;&#x4FDD;&#x5B58;&#x5E76;&#x9000;&#x51FA;<code>:wq</code></p>
<pre><code class="lang-bash">[mongodb]
name=MongoDB Repository
baseurl=http://downloads-distro.mongodb.org/repo/redhat/os/x86_64/
gpgcheck=0
enabled=1
</code></pre>
<p>&#x5B89;&#x88C5;&#x56FE;&#x5F62;&#x5E93;&#x4EE5;&#x53CA;<code>Mongodb</code>&#x6570;&#x636E;&#x5E93;</p>
<pre><code class="lang-bash">yum install -y GraphicsMagick mongodb-org-server mongodb-org gcc-c++
</code></pre>
<p>&#x63D0;&#x524D;&#x914D;&#x7F6E;&#x6570;&#x636E;&#x5E93;</p>
<pre><code class="lang-bash"><span class="hljs-comment"># &#x542F;&#x52A8;MongoDB</span>
service mongod start

<span class="hljs-comment"># &#x8FDE;&#x63A5;MongoDB</span>
mongo
&gt; use rocketchat <span class="hljs-comment"># &#x6DFB;&#x52A0;&#x6570;&#x636E;&#x5E93;</span>
&gt; <span class="hljs-built_in">exit</span>
<span class="hljs-comment">## &#x91CD;&#x542F;&#x6570;&#x636E;&#x5E93;</span>
service mongod restart
</code></pre>
<h2 id="t3&#x5B89;&#x88C5;Rocket.Chat">&#x5B89;&#x88C5;Rocket.Chat <a href="#t3&#x5B89;&#x88C5;Rocket.Chat"> # </a></h2>
<p>&#x5B89;&#x88C5;&#x7684;&#x65F6;&#x5019;&#x8BB0;&#x5F97;&#x524D;&#x9762;&#x52A0;&#x4E0A;<code>sudo</code></p>
<pre><code class="lang-bash"><span class="hljs-built_in">cd</span> /opt
curl -L https://download.rocket.chat/stable -o rocket.chat.tgz
<span class="hljs-comment"># &#x89E3;&#x538B; rocket.chat.tgz</span>
tar zxvf rocket.chat.tgz
mv bundle Rocket.Chat
<span class="hljs-built_in">cd</span> Rocket.Chat/programs/server
<span class="hljs-comment"># ========sudo&#x5F88;&#x91CD;&#x8981;===========</span>
sudo npm install <span class="hljs-comment"># &#x8BB0;&#x5F97;&#x524D;&#x9762;&#x52A0;&#x4E0A;sudo</span>
<span class="hljs-built_in">cd</span> ../..
</code></pre>
<p>&#x76F4;&#x63A5;&#x5728;&#x547D;&#x4EE4;&#x884C;&#x4E2D;&#x8FD0;&#x884C;&#x4E0B;&#x9762;&#x547D;&#x4EE4;&#xFF0C;&#x914D;&#x7F6E; <code>PORT</code>, <code>ROOT_URL</code> &#x548C; <code>MONGO_URL</code>:</p>
<pre><code class="lang-bash"><span class="hljs-built_in">export</span> PORT=3000
<span class="hljs-built_in">export</span> ROOT_URL=http://127.0.0.1:3000/
<span class="hljs-built_in">export</span> MONGO_URL=mongodb://localhost:27017/rocketchat
</code></pre>
<p>&#x5C06;3000&#x66FF;&#x6362;&#x4E3A;&#x60A8;&#x9009;&#x62E9;&#x7684;&#x7AEF;&#x53E3;&#xFF0C;&#x4E00;&#x822C;&#x60C5;&#x51B5;&#x9ED8;&#x8BA4;&#x5C31;&#x597D;&#x3002;
&#x5982;&#x679C;&#x60A8;&#x9009;&#x62E9;&#x4F7F;&#x7528;&#x7AEF;&#x53E3;80&#xFF0C;&#x5219;&#x9700;&#x8981;&#x4EE5;root&#x8EAB;&#x4EFD;&#x8FD0;&#x884C;Rocket.Chat&#x3002;
&#x5982;&#x679C;&#x60A8;&#x6CA1;&#x6709;&#x914D;&#x7F6E;DNS&#xFF0C;&#x8BF7;&#x4F7F;&#x7528;&#x60A8;&#x7684;IP&#x4EE3;&#x66FF;&#x4E3B;&#x673A;&#x540D;&#x3002; &#x60A8;&#x53EF;&#x4EE5;&#x7A0D;&#x540E;&#x5728;&#x7BA1;&#x7406;&#x5458;&#x83DC;&#x5355;&#x4E2D;&#x8FDB;&#x884C;&#x66F4;&#x6539;&#x3002;</p>
<h2 id="t4&#x542F;&#x52A8;&#x670D;&#x52A1;">&#x542F;&#x52A8;&#x670D;&#x52A1; <a href="#t4&#x542F;&#x52A8;&#x670D;&#x52A1;"> # </a></h2>
<p>&#x9996;&#x5148;&#x8BA9;Mongodb&#x4F7F;&#x7528;&#x4EE5;&#x4E0B;&#x547D;&#x4EE4;&#x542F;&#x52A8;&#x4E3B;&#x673A;&#xFF1A;</p>
<pre><code class="lang-bash">chkconfig mongod on
</code></pre>
<p>&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x542F;&#x52A8;mongo&#xFF1A;</p>
<pre><code class="lang-bash">systemctl start mongod
<span class="hljs-comment"># CentOS 6.X</span>
/etc/init.d/mongod start
</code></pre>
<p>&#x5C1D;&#x8BD5;&#x5B89;&#x88C5;</p>
<p>&#x73B0;&#x5728;&#x8BA9;&#x6211;&#x4EEC;&#x505A;&#x4E00;&#x4E2A;&#x5FEB;&#x901F;&#x6D4B;&#x8BD5;&#xFF0C;&#x770B;&#x770B;&#x662F;&#x5426;&#x4E00;&#x5207;&#x6B63;&#x5E38;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x7EE7;&#x7EED;&#xFF1A;</p>
<pre><code class="lang-bash">node main.js
</code></pre>
<pre><code class="lang-bash">meteor npm install --save bcrypt
</code></pre>
<p>&#x4F7F;&#x7528;&#x4E0A;&#x9762;&#x7684;&#x8FDE;&#x63A5;&#x5730;&#x5740; <code>http://127.0.0.1:3000/</code>&#x5728;&#x6D4F;&#x89C8;&#x5668;&#x4E2D;&#x6253;&#x5F00;&#xFF0C;&#x70B9;&#x51FB;<code>&#x6CE8;&#x518C;&#x65B0;&#x8D26;&#x53F7;</code>&#xFF0C;&#x8F93;&#x5165;<code>&#x7BA1;&#x7406;&#x5458;&#x59D3;&#x540D;</code>&#xFF0C;<code>&#x7535;&#x5B50;&#x90AE;&#x4EF6;</code>&#xFF0C;<code>&#x4E24;&#x6B21;&#x5BC6;&#x7801;</code>&#xFF0C;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre><code class="lang-bash">&#x59D3;&#x540D;&#xFF1A;admin
&#x7535;&#x5B50;&#x90AE;&#x4EF6;&#xFF1A;admin@admin.com
&#x5BC6;&#x7801;&#xFF1A;test1234
</code></pre>
<p>&#x70B9;&#x51FB;&#x63D0;&#x4EA4;&#xFF0C;&#x7CFB;&#x7EDF;&#x4F1A;&#x63D0;&#x793A;&#x4F60;&#x9009;&#x62E9;&#x4E00;&#x4E2A;&#x7528;&#x6237;&#xFF0C;&#x76F4;&#x63A5;&#x9009;&#x62E9;&#x7BA1;&#x7406;&#x5458;&#xFF0C;&#x70B9;&#x51FB;&#x4F7F;&#x7528;&#x6B64;&#x7528;&#x6237;&#x540D;&#x7EE7;&#x7EED;&#x3002;</p>
<pre><code class="lang-bash">Error: MONGO_URL must be <span class="hljs-built_in">set</span> <span class="hljs-keyword">in</span> environment
</code></pre>
<p>&#x62A5;<code>node-v46-linux-x64</code>&#x4E0D;&#x5B58;&#x5728;&#x9519;&#x8BEF; &#x76F4;&#x63A5;&#x66F4;&#x6539;&#x6587;&#x4EF6;&#x5939;&#x540D;&#x5B57;&#x5C31;&#x89E3;&#x51B3;&#x4E86;&#x3002;</p>
<pre><code class="lang-bash"><span class="hljs-built_in">cd</span> /opt/Rocket.Chat/programs/server/npm/node_modules/meteor/rocketchat_google-vision/node_modules/grpc/src/node/extension_binary/
mv node-v48-linux-x64 node-v46-linux-x64/
</code></pre>
<h2 id="t5&#x5F00;&#x673A;&#x542F;&#x52A8;">&#x5F00;&#x673A;&#x542F;&#x52A8; <a href="#t5&#x5F00;&#x673A;&#x542F;&#x52A8;"> # </a></h2>
<pre><code class="lang-bash">vi /usr/lib/systemd/system/rocketchat.service
</code></pre>
<p>&#x5C06;&#x4E0B;&#x9762;&#x5185;&#x5BB9;&#x590D;&#x5236;&#x5230;&#x4E0A;&#x9762;&#x6587;&#x4EF6;&#x4E2D;&#x3002;</p>
<pre><code>[Unit]
Description=The Rocket.Chat server
After=network.target remote-fs.target nss-lookup.target nginx.target mongod.target
[Service]
ExecStart=/usr/local/bin/node /opt/Rocket.Chat/main.js
StandardOutput=syslog
StandardError=syslog
SyslogIdentifier=rocketchat
User=root
Environment=MONGO_URL=mongodb://localhost:27017/rocketchat ROOT_URL=http://your-host-name.com-as-accessed-from-internet:3000/ PORT=3000
[Install]
WantedBy=multi-user.target
</code></pre><p>&#x73B0;&#x5728;&#x53EF;&#x4EE5;&#x8FD0;&#x884C;&#x4EE5;&#x4E0B;&#x547D;&#x4EE4;&#x6765;&#x542F;&#x7528;&#x6B64;&#x670D;&#x52A1;&#xFF1A;</p>
<pre><code class="lang-bash">systemctl <span class="hljs-built_in">enable</span> rocketchat.service
</code></pre>
<p>&#x6700;&#x540E;&#x901A;&#x8FC7;&#x8FD0;&#x884C;&#x6765;&#x542F;&#x52A8;&#x5B83;&#xFF0C;&#x4F60;&#x5C31;&#x4E0D;&#x9700;&#x8981;&#xFF1A;</p>
<pre><code class="lang-bash">systemctl start rocketchat.service
</code></pre>

        <div class="copyright">Powered by <a href="https://github.com/jaywcjlove/idoc" target="_blank">idoc</a>. Dependence <a href="https://nodejs.org">Node.js</a> run.</div>
    </div>
    
</div>


</body>
</html>
